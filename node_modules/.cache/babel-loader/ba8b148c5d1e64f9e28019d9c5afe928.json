{"ast":null,"code":"import _regeneratorRuntime from\"D:/june28/github upload/survey/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/june28/github upload/survey/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/june28/github upload/survey/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{Link,useHistory}from\"react-router-dom\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faKey,faMailBulk,faScrewdriver}from'@fortawesome/free-solid-svg-icons';import{Postlogin,GetuserbyEmail}from\"../api/api\";import UserContext from\"./usercontext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var history=useHistory();var userData={email:email,password:password};var user=useContext(UserContext);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{class:\"d-flex justify-content-center h-100\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card bg-dark col-4\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card-header bg-warning\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faScrewdriver}),\"Login\"]})}),/*#__PURE__*/_jsx(\"div\",{class:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var logindata,token,users;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return Postlogin(userData);case 4:logindata=_context.sent;window.localStorage.setItem(\"app_token\",logindata.data.token);token=logindata.data.token;//checking if token is present then go to next page otherwise stay in same page\nif(!token){_context.next=16;break;}_context.next=10;return GetuserbyEmail(email);case 10:users=_context.sent;console.log(users);user.setUserlist([users.data]);history.push(\"/home\");_context.next=18;break;case 16:alert(\"Email or password is incorrect\");history.push(\"/login\");case 18:_context.next=23;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 23:setEmail(\"\");setPassword(\"\");case 25:case\"end\":return _context.stop();}}},_callee,null,[[1,20]]);}));return function(_x){return _ref.apply(this,arguments);};}(),children:[/*#__PURE__*/_jsxs(\"div\",{class:\"input-group form-group\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text bg-warning\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faMailBulk,style:{fontSize:'1.75em'}})})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",class:\"form-control\",placeholder:\"email\",required:true,value:email,onChange:function onChange(e){setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group form-group mt-1\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text bg-warning\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faKey,style:{fontSize:'1.75em'}})})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",class:\"form-control\",placeholder:\"password\",required:true,value:password,onChange:function onChange(e){setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group mt-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",class:\"btn float-end btn-warning\"})})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"card-footer\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"d-flex justify-content-center text-light links\",children:[\"Don't have an account?\",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})})]})})})});}export default Login;","map":{"version":3,"names":["React","useContext","useState","Link","useHistory","FontAwesomeIcon","faKey","faMailBulk","faScrewdriver","Postlogin","GetuserbyEmail","UserContext","Login","email","setEmail","password","setPassword","history","userData","user","e","preventDefault","logindata","window","localStorage","setItem","data","token","users","console","log","setUserlist","push","alert","fontSize","target","value"],"sources":["D:/june28/github upload/survey/frontend/src/components/login.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faKey, faMailBulk, faScrewdriver } from '@fortawesome/free-solid-svg-icons'\nimport { Postlogin,GetuserbyEmail } from \"../api/api\";\nimport UserContext from \"./usercontext\";\n\nfunction Login() {\n\n    let [email, setEmail] = useState(\"\");\n    let [password, setPassword] = useState(\"\");\n    let history = useHistory();\n    let userData = { email, password }\n    let user = useContext(UserContext);\n\n    return (\n        <>\n            <div class=\"container mt-5\">\n                <div class=\"d-flex justify-content-center h-100\">\n                    <div class=\"card bg-dark col-4\">\n                        <div class=\"card-header bg-warning\">\n                            <h3><FontAwesomeIcon icon={faScrewdriver}></FontAwesomeIcon>Login</h3>\n                        </div>\n                        <div class=\"card-body\">\n                            <form onSubmit={async (e) => {\n                                e.preventDefault();\n                                try {\n\n                                    let logindata = await Postlogin(userData);\n                                    window.localStorage.setItem(\"app_token\", logindata.data.token)\n                                    let token = logindata.data.token;\n\n                                     //checking if token is present then go to next page otherwise stay in same page\n                                    if (token) {\n                                        let users = await GetuserbyEmail(email);\n                                        console.log(users)\n                                        user.setUserlist([users.data]);\n                                        history.push(`/home`)\n                                    }\n                                    else {\n                                       alert(\"Email or password is incorrect\")\n                                        history.push(`/login`);\n                                    }\n                                }\n                                catch (error) {\n                                    console.log(error)\n                                }\n                                setEmail(\"\");\n                                setPassword(\"\");\n                            }}>\n                                <div class=\"input-group form-group\">\n                                    <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text bg-warning\"><FontAwesomeIcon icon={faMailBulk} style={{ fontSize: '1.75em' }}></FontAwesomeIcon></span>\n                                    </div>\n                                    <input type=\"email\" class=\"form-control\" placeholder=\"email\" required value={email} onChange={(e) => {\n                                        setEmail(e.target.value);\n                                    }} />\n                                </div>\n                                <div class=\"input-group form-group mt-1\">\n                                    <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text bg-warning\"><FontAwesomeIcon icon={faKey} style={{ fontSize: '1.75em' }}></FontAwesomeIcon></span>\n                                    </div>\n                                    <input type=\"password\" class=\"form-control\" placeholder=\"password\" required value={password} onChange={(e) => {\n                                        setPassword(e.target.value);\n                                    }} />\n                                </div>\n                                <div class=\"form-group mt-1\">\n                                    <input type=\"submit\" value=\"Login\" class=\"btn float-end btn-warning\" />\n                                </div>\n                            </form>\n                        </div>\n                        <div class=\"card-footer\">\n                            <div class=\"d-flex justify-content-center text-light links\">\n                                Don't have an account?<Link to=\"/register\">Register</Link>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </>\n    )\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}